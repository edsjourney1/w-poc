import{renderImages}from"../../scripts/externalImage.js";import{excelDateToDate}from"../../scripts/tools.js";export default async function decorate(e){let t,a;var n=await(await fetch("/query-index.json")).json();let d;"category"===e.children[1].children[0].innerText.trim().toLowerCase()&&(t=e.children[1].children[1].innerText,d=n.data.filter(e=>e.category.toLowerCase().includes(t.toLowerCase()))),"tag"===e.children[1].children[0].innerText.trim().toLowerCase()&&(a=e.children[1].children[1].innerText,d=n.data.filter(e=>e.tags.toLowerCase().includes(a.toLowerCase())));var n=e.children[0].children[0].textContent,r=e.children[0].children[1].innerHTML,i=document.createElement("h2"),l=(i.classList.add("title"),document.createElement("span")),r=(l.classList.add("text-icon"),l.innerHTML=r,i.append(n),document.createElement("div"));r.classList.add("heading-div"),r.append(i,l),e.innerHTML="";let p=document.createElement("div");p.classList.add("cards-div"),e.append(r,p),p.innerHTML="",((e=3)=>{for(let e=0;e<d.length-1;e+=1){var t=Math.floor(Math.random()*(e+1));[d[e],d[t]]=[d[t],d[e]]}return d.slice(0,e)})().forEach(({image:e,tags:t,publishedDate:a,readTime:n,title:d,url:r,segment:i})=>{var l=document.createElement("div"),r=(l.classList.add("card-div"),new URL(r).pathname),c=document.createElement("div"),s=(c.classList.add("image-div"),document.createElement("a")),e=e.split("#"),o=(c.append(s),document.createElement("p")),e=(s.href=e[0],o.append(s),document.createElement("em")),s=document.createElement("a"),s=(s.href=r+`#${d}-thumbnail`,e.append(s),o.append(e),c.append(o),renderImages(c),l.appendChild(c),document.createElement("div")),e=(s.classList.add("content-div"),l.appendChild(s),document.createElement("h3")),o=document.createElement("a"),c=(e.classList.add("card-title"),o.innerHTML=d,e.append(o),o.href=""+r,s.appendChild(e),document.createElement("div")),d=(c.classList.add("date-div"),s.appendChild(c),document.createElement("p")),o=(d.classList.add("date"),d.textContent=a.includes("/")?a:excelDateToDate(a),""!==a&&c.appendChild(d),document.createElement("p"));o.classList.add("read-time"),o.textContent=n+" min read",""!==n&&c.appendChild(o);let m=document.createElement("p");m.classList.add("category-list"),s.appendChild(m),t.split(",").forEach(e=>{var t=document.createElement("a"),a=`/${i}/tags/`+e.trim().toLowerCase().replaceAll(" ","-").replaceAll("'","");t.href=window.location.origin+a,t.innerText=e.trim(),t.title=e.trim(),m.appendChild(t)}),p.appendChild(l)})}