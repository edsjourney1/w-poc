import{renderImages}from"../../scripts/externalImage.js";import{excelDateToDate}from"../../scripts/tools.js";export default async function decorate(e){let t=await(await fetch("/query-index.json")).json();var a=e.children[0].children[0].textContent,d=e.children[0].children[1].innerHTML,n=document.createElement("h2"),a=(n.classList.add("stories-title"),n.textContent=a,document.createElement("span")),d=(a.classList.add("line-icon"),a.innerHTML=d,document.createElement("div"));d.classList.add("new-heading"),d.append(n,a),e.innerHTML="";let h=document.createElement("div");h.classList.add("new-cards"),e.append(d,h),t.data.sort((e,t)=>new Date(t.publishedDate)-new Date(e.publishedDate)),t.data.slice(0,3).forEach(({image:e,tags:t,publishedDate:a,readTime:d,title:n,url:i,segment:c,description:l})=>{var s=document.createElement("div"),i=(s.classList.add("new-card-div"),new URL(i).pathname),r=document.createElement("div"),p=(r.classList.add("image-div"),document.createElement("a")),e=e.split("#"),m=(r.append(p),document.createElement("p")),e=(p.href=e[0],m.append(p),document.createElement("em")),p=document.createElement("a"),p=(p.href=""+i,e.append(p),m.append(e),r.append(m),renderImages(r),s.appendChild(r),document.createElement("div")),e=(p.classList.add("content-div"),s.appendChild(p),document.createElement("h3")),m=document.createElement("a"),r=(e.classList.add("card-title"),m.innerHTML=n,e.append(m),m.href=""+i,p.appendChild(e),document.createElement("p")),n=(r.classList.add("description"),r.textContent=l,p.appendChild(r),document.createElement("div")),m=(n.classList.add("date-div"),p.appendChild(n),document.createElement("p")),i=(m.classList.add("date"),m.textContent=a.includes("/")?a:excelDateToDate(a),""!==a&&n.appendChild(m),document.createElement("p"));i.classList.add("read-time"),i.textContent=d+" min read",""!==d&&n.appendChild(i);let o=document.createElement("p");o.classList.add("category-list"),p.appendChild(o),t.split(",").forEach(e=>{var t=document.createElement("a"),a=`/${c}/tags/`+e.trim().toLowerCase().replaceAll(" ","-").replaceAll("'","");t.href=window.location.origin+a,t.innerText=e.trim(),t.title=e,o.appendChild(t)}),h.appendChild(s)})}