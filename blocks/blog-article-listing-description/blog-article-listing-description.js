import{renderImages}from"../../scripts/externalImage.js";import{excelDateToDate}from"../../scripts/tools.js";export default async function decorate(v){let t,n;var e=await(await fetch("/query-index.json")).json();let a;"category"===v.children[1].children[0].innerText.trim().toLowerCase()&&(t=v.children[1].children[1].innerText,a=e.data.filter(e=>e.category.toLowerCase().includes(t.toLowerCase()))),"tag"===v.children[1].children[0].innerText.trim().toLowerCase()&&(n=v.children[1].children[1].innerText,a=e.data.filter(e=>e.tags.split(",").map(e=>e.toLowerCase().trim()).includes(n.toLowerCase())));e=v.children[0].children[0].innerText;let E=Number(v.children[0].children[1].innerText);var d=document.createElement("h2"),e=(d.classList.add("title"),d.append(e),document.createElement("div"));e.classList.add("heading-div"),e.append(d),v.innerHTML="";let u=document.createElement("div");u.classList.add("cards-div");var d=document.createElement("div"),i=(d.classList.add("pagination"),document.createElement("div"));i.classList.add("pagination-container");let l=document.createElement("div"),C=(l.classList.add("count-list"),document.createElement("div")),f=(C.classList.add("count-result"),i.append(l,C),d.append(i),v.append(e,u,d),1);i=window.location.href;let r,b=(i.includes("blue-at-work")?r="blue-at-work":i.includes("blue")&&(r="blue"),a.filter(e=>e.segment===r));function g(){u.innerHTML="";var e=(f-1)*E,t=e+E,n=(b.slice(e,t).sort((e,t)=>new Date(e.publishedDate?.split("/").reverse().join("/"))-new Date(t.publishedDate?.split("/").reverse().join("/"))).forEach(({image:e,tags:t,publishedDate:n,readTime:a,title:d,description:i,url:l,segment:r})=>{var c=document.createElement("div"),l=(c.classList.add("card-div"),new URL(l).pathname),o=document.createElement("div"),s=(o.classList.add("image-div"),document.createElement("a")),e=e.split("#"),p=(o.append(s),document.createElement("p")),e=(s.href=e[0],p.append(s),document.createElement("em")),s=document.createElement("a"),s=(s.href=l+`#${d}-thumbnail`,e.append(s),p.append(e),o.append(p),renderImages(o),c.appendChild(o),document.createElement("div")),e=(s.classList.add("content-div"),c.appendChild(s),document.createElement("h3")),p=document.createElement("a"),o=(e.classList.add("card-title"),p.innerHTML=d,e.append(p),p.href=""+l,s.appendChild(e),document.createElement("p")),d=(o.classList.add("description"),o.innerHTML=i,s.appendChild(o),document.createElement("div")),p=(d.classList.add("date-div"),s.appendChild(d),document.createElement("p")),l=(p.classList.add("date"),p.textContent=n.includes("/")?n:excelDateToDate(n),""!==n&&d.appendChild(p),document.createElement("p"));l.classList.add("read-time"),l.textContent=a+" min read",""!==a&&d.appendChild(l);let m=document.createElement("p");m.classList.add("category-list"),s.appendChild(m),t.split(",").forEach(e=>{var t=document.createElement("a"),n=`/${r}/tags/`+e.trim().toLowerCase().replaceAll(" ","-").replaceAll("'","");t.href=window.location.origin+n,t.textContent=e.trim(),t.title=e.trim(),m.appendChild(t)}),u.appendChild(c)}),l.innerHTML="",document.createElement("p")),n=(n.textContent="Showing",l.appendChild(n),document.createElement("span")),e=(n.textContent=1+e+" - "+Math.min(t,b.length),l.appendChild(n),document.createElement("p")),t=(e.textContent="of",l.appendChild(e),document.createElement("span"));t.textContent=b.length,l.appendChild(t)}(10<b.length?function a(){let t=Math.ceil(b.length/E);function n(e,t){var n=document.createElement("button");return n.textContent=e,n.addEventListener("click",()=>{f=t,g(),a(),window.scrollTo({top:0,behavior:"smooth"})}),t===f&&n.classList.add("active"),n}function e(){var e=document.createElement("button");return e.textContent="...",e.disabled=!0,e}C.innerHTML="";let d=document.createElement("p"),i=(d.innerHTML='<i class="fa-regular fa-chevrons-left"></i>',d.tabIndex=0,d.role="button",d.ariaLabel="Go to first page",d.addEventListener("click",()=>{f=1,g(),a(),window.scrollTo({top:0,behavior:"smooth"})}),d.addEventListener("keydown",e=>{"Enter"===e.key&&d.click()}),C.appendChild(d),document.createElement("p"));if(i.innerHTML='<i class="fa-regular fa-chevron-left"></i>',i.tabIndex=0,i.role="button",i.ariaLabel="Go to previous page",i.addEventListener("click",()=>{1<f&&(--f,g(),a(),window.scrollTo({top:0,behavior:"smooth"}))}),i.addEventListener("keydown",e=>{"Enter"===e.key&&i.click()}),C.appendChild(i),t<=5)for(let e=1;e<=t;e+=1)C.appendChild(n(e,e));else if(f<=3){for(let e=1;e<=3;e+=1)C.appendChild(n(e,e));C.appendChild(e()),C.appendChild(n(t,t))}else if(f>=t-2){C.appendChild(n(1,1)),C.appendChild(e());for(let e=t-2;e<=t;e+=1)C.appendChild(n(e,e))}else{C.appendChild(n(1,1)),C.appendChild(e());for(let e=f-1;e<=f+1;e+=1)C.appendChild(n(e,e));C.appendChild(e()),C.appendChild(n(t,t))}let l=document.createElement("p"),r=(l.innerHTML='<i class="fa-regular fa-chevron-right"></i>',l.tabIndex=0,l.role="button",l.ariaLabel="Go to next page",l.addEventListener("click",()=>{f<t&&(f+=1,g(),a(),window.scrollTo({top:0,behavior:"smooth"}))}),l.addEventListener("keydown",e=>{"Enter"===e.key&&l.click()}),C.appendChild(l),document.createElement("p"));r.innerHTML='<i class="fa-regular fa-chevrons-right"></i>',r.tabIndex=0,r.role="button",r.ariaLabel="Go to last page",r.addEventListener("click",()=>{f=t,g(),a(),window.scrollTo({top:0,behavior:"smooth"})}),r.addEventListener("keydown",e=>{"Enter"===e.key&&r.click()}),C.appendChild(r),g();var c=v.querySelector(".count-result p i.fa-chevrons-left").parentElement,o=v.querySelector(".count-result p i.fa-chevrons-right").parentElement,s=v.querySelector(".count-result p i.fa-chevron-left").parentElement,p=v.querySelector(".count-result p i.fa-chevron-right").parentElement,m=v.querySelector(".count-result button"),u=v.querySelectorAll(".count-result button"),h=v.querySelector(".count-result button:last-of-type"),L=u[1],u=u[u.length-2];m.classList.contains("active")?(s.classList.add("dp-blur"),s.tabIndex=-1):(s.classList.remove("dp-blur"),s.tabIndex=0),m.classList.contains("active")||L.classList.contains("active")?(c.classList.add("dp-none"),c.tabIndex=-1):(c.classList.remove("dp-none"),c.tabIndex=0),h.classList.contains("active")?(p.classList.add("dp-blur"),p.tabIndex=-1):(p.classList.remove("dp-blur"),p.tabIndex=0),h.classList.contains("active")||u.classList.contains("active")?(o.classList.add("dp-none"),o.tabIndex=-1):(o.classList.remove("dp-none"),o.tabIndex=0)}:g)()}