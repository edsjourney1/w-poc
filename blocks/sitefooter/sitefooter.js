import{windowUrlDetails}from"../../scripts/tools.js";import{getMetadata}from"../../scripts/aem.js";import{loadFragment}from"../fragment/fragment.js";export default async function decorate(e){let t,n;var r=(windowUrlDetails.pathname||"").split("/"),a=(n=r.includes("languages-ma")?(t=getMetadata("/content-fragments/language-ma-helper-fragment"))?new URL(t,window.location).pathname:"/content-fragments/language-ma-helper-fragment":(t=getMetadata("/content-fragments/language-helper-fragment"))?new URL(t,window.location).pathname:"/content-fragments/language-helper-fragment",await loadFragment(n)),a=Array.from(a.querySelectorAll(".language-helper")),o=Array.from(e.querySelectorAll(":scope > div"));let l=document.createElement("div"),i=(l.className="sitefooter-info",document.createElement("div")),c=(i.className="sitefooter-copy",l.innerHTML='<div class="sitefooter-info-content"></div>',i.innerHTML='<div class="sitefooter-copy-content"></div>',document.querySelector('meta[name="page-id"]')?.getAttribute("content")||"");o.forEach((e,t)=>{var n,r;(t<7?(0===t&&([n,r]=e.children,e.append(n),e.append(r)),l):(9===t&&e.classList.add("sitefooter-page-id"),i)).querySelector("div").append(e)});o=l.querySelector("div:nth-child(5)");let u=l.querySelector("div:nth-child(6)");if(0<a.length&&!r.includes("providers")&&!r.includes("provider")){let m=document.createElement("ul");a.forEach(t=>{var e=document.createElement("li"),n=document.createElement("button");let r=document.createElement("em"),a=(n.type="button","");var[o]=t.children;let[l,i,c,d]=o.children;n.textContent=l.querySelector("p")?.textContent,n.setAttribute("lang",i.querySelector("p")?.textContent),n.setAttribute("dir",c.querySelector("p")?.textContent),n.className="fontfamily-"+d.querySelector("p")?.textContent;for(let e=1;e<t.children.length;e+=1){var[p,s]=t.children[e].children;s.querySelector("p")?"custom"===p.querySelector("p").textContent?a+=`<span class='fontfamily-${d.querySelector("p")?.innerHTML}'>${s.querySelector("p").innerHTML}</span>`:a+=`<span class='fontfamily-roboto'>${s.querySelector("p").innerHTML}</span>`:a+='<span class="fontfamily-roboto">&nbsp;</span>'}r.innerHTML=a,e.append(n),e.append(r),m.append(e),n.addEventListener("click",()=>{u.innerHTML=r.innerHTML,u.setAttribute("lang",i.querySelector("p")?.textContent),u.setAttribute("dir",c.querySelector("p")?.textContent)})}),o.append(m),window.addEventListener("unload",()=>{u.innerHTML="",u.removeAttribute("lang"),u.removeAttribute("dir")})}i.querySelector(".sitefooter-copy p em").innerHTML=(new Date).getFullYear();r=i.querySelector(".sitefooter-copy .sitefooter-page-id p");if(r){let e=document.querySelector('meta[name="last-updated-date"]')?.getAttribute("content")||"";0===e.length&&(o=8<(a=new Date).getMonth()?a.getMonth()+1:"0"+(a.getMonth()+1),o=(o+="/"+(9<a.getDate()?a.getDate():"0"+a.getDate()))+"/"+a.getFullYear(),e=o),0<c.length&&(c="<span>|</span>"+c),r.innerHTML=r.innerHTML+": "+e+c}e.append(l),e.append(i)}